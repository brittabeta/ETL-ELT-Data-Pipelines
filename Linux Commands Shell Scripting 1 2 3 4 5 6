####Shell Commands 1
# terminal, common line
Navigating Directories
cd
Explore directories on the cloud IDE Linux system using cd command
Special Paths
~ Home directory ~ = /home/theia
/ Root directory
. Current directory
.. Parent directory
/home/project Project directory special empty directory provided for my work
bin Child of the Root directory /bin child = inside
Change working directory to home directory
cd ~
Enter
~$
Changing working directory to root directory
cd /
Enter
/$
Changing working directory to child
cd bin
/bin$
Changing working directory back to home directory
cd ../home/theia
~$
(or)
(cd ~)
Changing working directory back to project directory
cd ../project
/home/project$
Browsing Directories
ls
Explore browsing content of directories using ls command, a special command the shell knows by default
View files in the current working directory
cd ~
ls
docker-compose         lib           README.md
dsdriver               node_modules  skills-network-extension-v0.1.0.tgz
entrypoint.sh          package.json  src-gen
gen-webpack.config.js  plugins       webpack.config.js
javasharedresources    postgres      yarn.lock
Go to home project directory
cd ../home/theia
cd ../project
ls
Nothing
Viewing files in any directory
Using the path to the directory: ls [PATH TO DIRECTORY]
ls /
bin   dev  home  lib32  libx32  mnt  proc  run   srv  tmp  var
boot  etc  lib   lib64  media   opt  root  sbin  sys  usr
Output = contents of root directory
Directory
/bin System libraries
/sbin Binaries that require root privileges
/usr User programs and data
/home Home directory
/media Removable media device directories
ls /bin
bash          chgrp          false     lesspipe    nisdomainname  sh.distrib  which
bunzip2       chmod          fgrep     ln          pidof          sleep       ypdomainname
bzcat         chown          findmnt   login       ping           stty        zcat
bzcmp         cp             fuser     ls          ping6          su          zcmp
bzdiff        dash           grep      lsblk       ps             sync        zdiff
bzegrep       date           gunzip    mkdir       pwd            tar         zegrep
bzexe         dd             gzexe     mknod       rbash          tempfile    zfgrep
bzfgrep       df             gzip      mktemp      readlink       touch       zforce
bzgrep        dir            hostname  more        rm             true        zgrep
bzip2         dmesg          kill      mount       rmdir          umount      zless
bzip2recover  dnsdomainname  less      mountpoint  rnano          uname       zmore
bzless        domainname     lessecho  mv          run-parts      uncompress  znew
bzmore        echo           lessfile  nano        sed            vdir
cat           egrep          lesskey   netstat     sh             wdctl
Output = contents of root directory, see ls, ls runs using the file /bin/ls
Updating and Installing Packages
Get latest packages information
sudo apt update
Output = fetch the latest package information from trusted sources
apt update does not update, just finds them
Updating nano
nano enables use of terminal as a text editor
Get latest supported version of nano
sudo apt upgrade nano
Output = Do you want to continue? [Y/n] n 
Abort.
Y capital = default, so Enter = y
Installing vim
vim another text-editing program, does not come with system, need to install
sudo apt install vim
Output = Do you want to continue? [Y/n] y
Output = install of vim
Creating and editing Files
Use nano to create and edit files
Navigating to project directory
cd /home/project
Auto-complete the path
cd /home/pr
Tab
Creating and editing a file
nano myprogram.py
Output = creates .py Python file called myprogram.py
Type to the file
print(‘Learning Linux is fun!’)
Ctrl x to exit
Output = Save modified buffer (ANSWERING “No” WILL DESTROY CHANGES) ?
Y Yes
N No   ^C Cancel
y
Enter
Output = saved to file myprogram.py
Run the Python file
ls
myprogram.py
Output = myprogram.py is in working directory
Run Python file
python3 myprogram.py
Learning Linux is fun!
Auto-compete 
python3 my
Tab
Learning Linux is fun!
Display content of /usr directory: ls /usr
bin  doc  games  include  lib  lib32  libx32  local  man  sbin  share  src
Navigate to the /media directory: cd /media
/media$
Navigate to /home/project directory and display contents: ls /home/project (or) cd /home/project then ls
myprogram.py
/media$ (or) /home/project$
Using nano, edit myprogram.py to add a new line containing ‘print(‘My name is…’): up arrow until nano myprogram.py Enter print(My name is Britta) ctrl X y to save enter to confirm file name
Look at, run, read, myprogram.py: python3 myprogram.py
My name is Britta
Learning Linux is fun!
Using vi create a file called done.py that prints “I am done with the lab!”: vi done.py then i then print(‘I am done with the lab!) ESC :wq Enter
Look at done.py: python3 done.py
Output:
File “done.py”, line 1
	print(‘I am done with the lab!)
Syntax error: EOL while scanning string literal (LOL I forgot ‘
Fix it: C edit ESC :wq python3 done.py
Thank you: https://www.cs.colostate.edu/helpdocs/vi.html 
I am done with the lab!

####Shell Scripting 2
Informational Commands
Display the name of the current user
whoami
theia
Display current logged in users: who
Get basic information about the operating system
uname
Linux
Print all the system informations in order: Kernel name, network node hostname, kernel release date, kernel version, machine hardware name, hardware platform, operating system
uname -a
Linux theiadocker-bretana1226 5.4.0-139-generic #156-Ubuntu SMP Fri Jan 20 17:27:18 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
Obtain user and group identity information
id
uid=1000(theia) gid=1000(theia) groups=1000(theia),27(sudo),100(users)
Above: uid (user id) and gid (group id) for user (theia)
Get available disk space
df
Filesystem     1K-blocks     Used Available Use% Mounted on
overlay        101986876 53610048  43956592  55% /
tmpfs              65536        0     65536   0% /dev
tmpfs           16367228        0  16367228   0% /sys/fs/cgroup
/dev/vda2      101986876 53610048  43956592  55% /etc/kube
shm                65536        0     65536   0% /dev/shm
tmpfs           16169056       16  16169040   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs           16367228        0  16367228   0% /proc/acpi
tmpfs           16367228        0  16367228   0% /proc/scsi
tmpfs           16367228        0  16367228   0% /sys/firmware
Above: display disk space in 512 byte blocks
Get available disk space in “human-readable” format
df -h
Filesystem      Size  Used Avail Use% Mounted on
overlay          98G   52G   42G  55% /
tmpfs            64M     0   64M   0% /dev
tmpfs            16G     0   16G   0% /sys/fs/cgroup
/dev/vda2        98G   52G   42G  55% /etc/kube
shm              64M     0   64M   0% /dev/shm
tmpfs            16G   16K   16G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs            16G     0   16G   0% /proc/acpi
tmpfs            16G     0   16G   0% /proc/scsi
tmpfs            16G     0   16G   0% /sys/firmware
View currently running processes
ps
   PID TTY          TIME CMD
   236 pts/0    00:00:00 bash
   469 pts/0    00:00:00 ps
Above: only processes owned by you
Display all processes running, owned by other users
ps -e
   PID TTY          TIME CMD
     1 ?        00:00:00 sh
     7 ?        00:00:00 entrypoint.sh
   154 ?        00:00:00 cron
   155 ?        00:00:01 node
   166 ?        00:00:00 sh
   167 ?        00:00:00 node
   178 ?        00:00:03 node
   189 ?        00:00:03 node
   204 ?        00:00:00 node
   217 ?        00:00:00 node
   236 pts/0    00:00:00 bash
   470 pts/0    00:00:00 ps
Get information on the running processes and system resources
top (or) top -n10 (to exit automatically after 10 repetitions)
top - 17:50:23 up 5 days,  6:46,  0 users,  load average: 0.79, 1.25, 1.22
Tasks:  12 total,   1 running,  11 sleeping,   0 stopped,   0 zombie
%Cpu(s):  5.3 us,  4.7 sy,  0.0 ni, 88.6 id,  0.2 wa,  0.0 hi,  0.6 si,  0.7 st
KiB Mem : 32734456 total,  6009820 free,  6097168 used, 20627468 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 26422648 avail Mem 

   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                  
   189 theia     20   0 1075076  56828  32832 S   0.7  0.2   0:04.50 node                     
     1 theia     20   0    4636    876    804 S   0.0  0.0   0:00.02 sh                       
     7 theia     20   0   12892   3316   3012 S   0.0  0.0   0:00.01 entrypoint.sh            
   154 root      20   0   31320   2900   2620 S   0.0  0.0   0:00.00 cron   
Above: summary information of the system and a table of more detailed information related to the processes or threads currently running and managed by the kernel, including cpu and memory usage per process
Areas: Summary Area (information like system uptime, number of users, load average, overall memory usage), Column header (attribute names), Task area (the data for each process PID)
Refresh: keeps refreshing until…q or ctrl C
Sorting top: with top running - M Memory Usage sort, P CPU Usage sort, N Process ID PID sort, T Running time sort
Display Messages
echo “Hello echo usage”
Hello echo usage
Special Characters with echo (use with -e): \n to start a new line or \t to insert tab
echo -e “Print \nin two lines”
Print
in two lines
Display date and time
date
Sun Apr 16 18:00:35 EDT 2023 (current date and time)
Display date and time in mm/dd/yy format
date “+%D”
04/16/23
Format Specifiers: %d day of month (01 to 31), %h display month name abbreviation (Jan to Dec), %m display month of year (01 to 12), %Y display four-digit year, %T display time in 24 hour format HH:MM:SS, %H display the hour
View the Reference Manual for a Command
man date
Output: description and arguments, q to quit

File and directory management commands
Get the location of the current working directory
pwd
/home/project
List the files and directories
ls
Nothing
List files in the /bin directory
ls /bin
Lots of binary and executable files (including ls and pwd)
ls /bin/ls
/bin/ls
List all files starting with b in the /bin directory
ls /bin/b*
/bin/bash     /bin/bzcmp    /bin/bzexe    /bin/bzip2         /bin/bzmore
/bin/bunzip2  /bin/bzdiff   /bin/bzfgrep  /bin/bzip2recover
/bin/bzcat    /bin/bzegrep  /bin/bzgrep   /bin/bzless
Print a long list of files with additional information, last modified date
ls -l /bin
…
-rwxr-xr-x 1 root root     140 Apr  8  2022 zegrep
-rwxr-xr-x 1 root root     140 Apr  8  2022 zfgrep
-rwxr-xr-x 1 root root    2131 Apr  8  2022 zforce
-rwxr-xr-x 1 root root    6456 Apr  8  2022 zgrep
-rwxr-xr-x 1 root root    2037 Apr  8  2022 zless
-rwxr-xr-x 1 root root    1910 Apr  8  2022 zmore
-rwxr-xr-x 1 root root    5071 Apr  8  2022 znew
ls command options:
-a all files including hidden
-d directories only, not files
-h with -l and -s, print sizes like 1K 234M 2G
-l include attributes like: permissions, owner, size, last-modified date
-S sort by file size, largest first
-t sort by last-modified date, newest first
-r reverse the sort order
Get a long list of all files including hidden files
ls -la /etc
…
-rw-r--r-- 1 root     root      1260 Feb 25  2018 ucf.conf
drwxr-xr-x 3 root     root      4096 Feb 27 12:18 ufw
drwxr-xr-x 1 root     root      4096 Feb 27 12:12 update-motd.d
-rw-r--r-- 1 root     root      4942 Apr  8  2019 wgetrc
drwxr-xr-x 1 root     root      4096 Feb 27 12:23 X11
drwxr-xr-x 3 root     root      4096 Feb 27 12:12 xdg
drwxr-xr-x 3 root     root      4096 Feb 27 12:12 xml
Above: combining -l and -a to -la
Create a directory names scripts
mkdir scripts
ls
scripts
Change current working directory to the scripts directory
cd scripts
/home/project/scripts$
Verify you are working in the scripts directory
pwd
/home/project/scripts
Go back to home directory
cd
~$
pwd
/home/theia
Go to the parent directory of the current directory
cd ..
/home$
cd
~$
Create an empty file myfile.txt
touch myfile.txt
ls
docker-compose         javasharedresources  package.json  skills-network-extension-v0.1.0.tgz
dsdriver               lib                  plugins       src-gen
entrypoint.sh          myfile.txt           postgres      webpack.config.js
gen-webpack.config.js  node_modules         README.md     yarn.lock
Note: if the file already exists, touch updates the access timestamp or last-modified date
date -r myfile.txt
Sun Apr 16 18:21:48 EDT 2023
Search and Locate Files
find
Search for files in a directory, based on attributes: name, type, owner, size, timestamp
Seaches the entire directory tree starting from the given directory name
Find all .txt files in the /etc directory
find /etc -name ‘*.txt’
/etc/X11/rgb.txt
/etc/cassandra/triggers/README.txt
find: ‘/etc/ssl/private’: Permission denied
/etc/java-11-openjdk/security/policy/README.txt
Remove files
rm -i
Command rm used to delete files, ideally with -i to ask for confirmation before deletion
Remove myfile.txt
rm -i myfile.txt
y
ls
docker-compose         lib           README.md
dsdriver               node_modules  skills-network-extension-v0.1.0.tgz
entrypoint.sh          package.json  src-gen
gen-webpack.config.js  plugins       webpack.config.js
javasharedresources    postgres      yarn.lock
Move, Rename a file
mv
Make a file called users.txt
touch users.txt
Note: if the target file already exists with mv, it will be overwritten by the source file
Note2: also a rename option
Rename users.txt as user-info.txt
mv users.txt user-info.txt
docker-compose         node_modules                         src-gen
dsdriver               package.json                         user-info.txt
entrypoint.sh          plugins                              webpack.config.js
gen-webpack.config.js  postgres                             yarn.lock
javasharedresources    README.md
lib                    skills-network-extension-v0.1.0.tgz
Move the user-info.txt file to the /tmp directory
mv user-info.txt /tmp
Verify movement
ls
Not there
ls -l /tmp
…
-rw-r--r-- 1 theia theia        0 Apr 16 18:28 user-info.txt
srwxr-xr-x 1 theia theia        0 Apr 16 17:39 vscode-git-cf1816fa35.sock
drwxr-xr-x 2 theia theia     4096 Apr 16 17:39 yarn--1681681174214-0.40136962783249097
Copy files
cp
Copy user-info.txt to current working directory (from /tmp)
cp /tmp/user-info.txt user-info.txt
ls
docker-compose         node_modules                         src-gen
dsdriver               package.json                         user-info.txt
entrypoint.sh          plugins                              webpack.config.js
gen-webpack.config.js  postgres                             yarn.lock
javasharedresources    README.md
lib                    skills-network-extension-v0.1.0.tgz
Copy the content of /etc/passwd to a file called users.txt under the current directory
cp /etc/passwd user.txt (a new file)
ls
docker-compose         lib           README.md                            webpack.config.js
dsdriver               node_modules  skills-network-extension-v0.1.0.tgz  yarn.lock
entrypoint.sh          package.json  src-gen
gen-webpack.config.js  plugins       user-info.txt
javasharedresources    postgres      users.txt
Access Control Commands
Get the required files from https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-LX0117EN-SkillsNetwork/labs/module%201/usdoi.txt
wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-LX0117EN-SkillsNetwork/labs/module%201/usdoi.txt
Permissions categories: owner, group, all users
Permissions: read r, write w, execute x, - no permission r/w/x
Permission sets: 3ownerpermissions 3grouppermissions 3alluserspermissions
Permission set prefix: - for file, d for directory
See permissions for the file usdoi.txt (see for a directory use -ld)
ls -l usdoi.txt
-rw-r--r-- 1 theia theia 8121 Sep 28  2022 usdoi.txt
Change Permissions
chmod (change mode)
Options: r, w, x (permissions: read, write, execute), u, g, o (user categories: owner, group, all users), +, - (operations: grand, revoke)
Remove Read Permission for Owner, Group, and All Users of usdoi.txt
chmod -r usdoi.txt
Verify removal of permissions
ls -l usdoi.txt
--w------- 1 theia theia 8121 Sep 28  2022 usdoi.txt
Add Read Permission to Owner, Group, and All Users of usdoi.txt
chmod +r usdoi.txt
ls -l usdoi.txt
-rw-r--r-- 1 theia theia 8121 Sep 28  2022 usdoi.txt
Remove the Read Permission for ‘All Users’
chmod o-r usdoi.txt
ls -l usdoi.txt
-rw-r----- 1 theia theia 8121 Sep 28  2022 usdoi.txt
Practice
Display content of /home directory
ls /home
project  theia
Ensure you are in your home directory
cd
pwd
/home/theia
Create a new directory called final in home directory
mkdir final
ls
docker-compose  gen-webpack.config.js  plugins                              usdoi.txt
dsdriver        javasharedresources    postgres                             user-info.txt
entrypoint.sh   lib                    README.md                            users.txt
final           node_modules           skills-network-extension-v0.1.0.tgz  webpack.config.js
      package.json           src-gen                              yarn.lock
View permissions of final directory
ls -ld final
drwxr-xr-x 2 theia theia 4096 Apr 16 20:58 final
Create a new blank file display.sh in final directory
cd final
touch display.sh
Create a copy of display.sh called report.sh
cp display.sh report.sh
Delete the file display.sh
rm -i display.sh
List files in /etc directory in ascending order by access time
ls -ltr /etc/
total 676
-rw-r--r-- 1 root     root        34 Jan 27  2016 ld.so.conf
-rw-r--r-- 1 root     root       367 Jan 27  2016 bindresvport.blacklist
-rw-r--r-- 1 root     root     24301 Jul 15  2016 mime.types
-rw-r--r-- 1 root     root       449 Jul 15  2016 mailcap.order
-rw-r--r-- 1 root     root       497 Oct  5  2016 nsswitch.conf…
Display the current time
date ‘+%T’
21:07:16
Copy the file /var/log/bootstrap.log to current directory
cp /var/log/bootstrap.log .
Note: period . above
ls
bootstrap.log  report.sh

### Linux Commands and Shell Scripting: 3
Viewing file content
Download usdoi.txt in current directory
$ wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/usdoi.txt
Display all file contents of usdoi.txt
$ cat usdoi.txt
The unanimous Declaration of the thirteen united States of America, When in the
Course of human events, it becomes necessary for one people to dissolve the
political bands which have connected them with another, and to assume among the
powers of the earth, the separate and equal station to which the Laws of Nature
and of Nature's God entitle them, a decent respect to the opinions of mankind
requires that they should declare the causes which impel them to the
…
Display file contents page-wise
$ more usdoi.txt
Space -> next page 
…
We hold these truths to be self-evident, that all men are created equal, that
they are endowed by their Creator with certain unalienable Rights, that among
--More--(7%)
Space
…
Governments long established should not be changed for light and transient
causes; and accordingly all experience hath shewn, that mankind are more
disposed to suffer, while evils are sufferable, than to right themselves by
--More--(17%)
Display first 10 lines of file usdoi.txt
q
$ head usdoi.txt
The unanimous Declaration of the thirteen united States of America, When in the
Course of human events, it becomes necessary for one people to dissolve the
political bands which have connected them with another, and to assume among the
powers of the earth, the separate and equal station to which the Laws of Nature
and of Nature's God entitle them, a decent respect to the opinions of mankind
requires that they should declare the causes which impel them to the
separation.

We hold these truths to be self-evident, that all men are created equal, that
they are endowed by their Creator with certain unalienable Rights, that among
Note: blank line = 1 line of 10
Display first 3 lines
$ head -3 usdoi.txt
The unanimous Declaration of the thirteen united States of America, When in the
Course of human events, it becomes necessary for one people to dissolve the
political bands which have connected them with another, and to assume among the
Display last 10 lines
$ tail usdoi.txt
People of these Colonies, solemnly publish and declare, That these United
Colonies are, and of Right ought to be Free and Independent States; that they
are Absolved from all Allegiance to the British Crown, and that all political
connection between them and the State of Great Britain, is and ought to be
totally dissolved; and that as Free and Independent States, they have full
Power to levy War, conclude Peace, contract Alliances, establish Commerce, and
to do all other Acts and Things which Independent States may of right do. And
for the support of this Declaration, with a firm reliance on the protection of
divine Providence, we mutually pledge to each other our Lives, our Fortunes and
our sacred Honor.
Display last 2 lines
$ tail -2 usdoi.txt
divine Providence, we mutually pledge to each other our Lives, our Fortunes and
our sacred Honor.
Count lines, words, characters
Find the number of lines, words, and characters of usdoi.txt
$ wc usdoi.txt
152 1330 8121 usdoi.txt
Find only the number of lines
$ wc -l usdoi.txt
152 usdoi.txt
Find only the number of words
$ wc -w usdoi.txt
1330 usdoi.txt
Find only the number of characters 
$ wc -c usdoi.txt
8121 usdoi.txt
Customizing view of file content
View sorted file lines of usdoi.txt
$ sort usdoi.txt
abolishing the forms to which they are accustomed. But when a long train of
absolute rule into these Colonies:
abuses and usurpations, pursuing invariably the same Object evinces a design to
and correspondence. They too have been deaf to the voice of justice and of
and magnanimity, and we have conjured them by the ties of our common kindred to
and of Nature's God entitle them, a decent respect to the opinions of mankind
and organizing its powers in such form, as to them shall seem most likely to
Appropriations of Lands.
are Absolved from all Allegiance to the British Crown, and that all political
Arms against their Country, to become the executioners of their friends and
…
View reverse-sorted lines of usdoi.txt
$ sort -r usdoi.txt
within.
We, therefore, the Representatives of the united States of America, in General
We hold these truths to be self-evident, that all men are created equal, that
waging War against us.
unworthy the Head of a civilized nation.
unwarrantable jurisdiction over us. We have reminded them of the circumstances
…
View with repeated, consecutive lines merged into one of file zoo.txt
Obtain zoo.txt
$ wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-LX0117EN-SkillsNetwork/labs/module%201/zoo.txt
View contents of zoo.txt
$ cat zoo.txt
zebra
zebra
lion
lion
anaconda
zebra
zebra
lion
zebra
View the contents of zoo.txt with equal, consecutive lines merged into one
$ uniq zoo.txt
zebra
lion
anaconda
zebra
lion
zebra
Extract lines matching specified criteria
Extract all lines of usdoi.txt containing the word people
$ grep people usdoi.txt
Course of human events, it becomes necessary for one people to dissolve the
people, unless those people would relinquish the right of Representation in the
firmness his invasions on the rights of the people.
to harrass our people, and eat out their substance.
the lives of our people.
Tyrant, is unfit to be the ruler of a free people.
Options with grep: -n (along with matching lines, also print the line numbers), -c (get count of matching lines), -i (ignore the case of the text while matching), -v (print all lines which do not contain the pattern), -w (match only if the pattern matches whole words)
Print all lines from /etc/passwd file, not containing the pattern login
$ grep -v login /etc/passwd
root:x:0:0:root:/root:/bin/bash
sync:x:4:65534:sync:/bin:/bin/sync
theia:x:1000:1000:,,,:/home/theia:/bin/bash
postgres:x:105:109:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash
View lines of file with filter applied to each line
View the first 2 characters of each line
$ cut -c -2 zoo.txt
ze
ze
li
li
an
ze
ze
li
ze
View each list from the second character
$ cut -c 2- zoo.txt
ebra
ebra
ion
ion
naconda
ebra
ebra
ion
ebra
View multiple files side by side
Download file zoo_ages.txt
$ wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-LX0117EN-SkillsNetwork/labs/module%201/zoo_ages.txt
View zoo.txt and zoo_ages.txt with lines aligned as columns
$ paste zoo.txt zoo_ages.txt
zebra   17
zebra   12
lion    7
lion    4
anaconda        3
zebra   4
zebra   1
lion    0
zebra   1
View zoo.txt and zoo_ages.txt with delimiter , instead of /t
$ paste -d “,” zoo.txt zoo_ages.txt
zebra,17
zebra,12
lion,7
lion,4
anaconda,3
zebra,4
zebra,1
lion,0
zebra,1
File and folder archiving and compression
Create and manage file archives
Create an archive of the entire /bin directory into a file bin.tar
$ tar -cvf bin.tar /bin
…
/bin/ping
/bin/ping6
/bin/netstat
/bin/rnano
/bin/nano
/bin/fuser
/bin/lesskey
/bin/less
/bin/lessfile
/bin/lesspipe
/bin/lessecho
Options with tar: -c (create new archive file), -v (verbosely list files processed), -f (archive file name)
See the list of files in the archive
$ tar -tvf bin.tar
…
-rwxr-xr-x root/root     35928 2018-12-11 10:46 bin/fuser
-rwxr-xr-x root/root     19856 2017-11-30 23:11 bin/lesskey
-rwxr-xr-x root/root    170760 2017-11-30 23:11 bin/less
lrwxrwxrwx root/root         0 2017-11-30 23:11 bin/lessfile -> lesspipe
-rwxr-xr-x root/root      8564 2017-11-30 23:11 bin/lesspipe
-rwxr-xr-x root/root     10256 2017-11-30 23:11 bin/lessecho
Untar the archive, extract files from the archive
$ tar -xvf bin.tar
…
bin/nano
bin/fuser
bin/lesskey
bin/less
bin/lessfile
bin/lesspipe
bin/lessecho
Verify the folder bin is extracted
$ ls -l
total 5592
drwxr-sr-x 2 theia users    4096 Feb 27 12:29 bin
-rw-r--r-- 1 theia users 5703680 Apr 17 11:35 bin.tar
-rw-r--r-- 1 theia users    8121 Sep 21  2022 usdoi.txt
-rw-r--r-- 1 theia users      20 Sep 28  2022 zoo_ages.txt
-rw-r--r-- 1 theia users      54 Sep 28  2022 zoo.txt
Package and compress archive files
Create a zip file config.zip with files having extension .conf in /etc directory
$ zip config.zip /etc/*.conf
…
  adding: etc/nsswitch.conf (deflated 49%)
  adding: etc/ntp.conf (deflated 52%)
  adding: etc/pam.conf (deflated 62%)
  adding: etc/resolv.conf (deflated 27%)
  adding: etc/sensors3.conf (deflated 82%)
  adding: etc/sysctl.conf (deflated 61%)
  adding: etc/ucf.conf (deflated 61%)
Create an archive of the entire /bin directory
$ zip -r bin.zip /bin
…
 adding: bin/lesskey (deflated 64%)
  adding: bin/less (deflated 54%)
  adding: bin/lessfile (deflated 68%)
  adding: bin/lesspipe (deflated 68%)
  adding: bin/lessecho (deflated 68%)
Extract, list, test compressed files in a zip archive
List the files of the archive config.zip
$ unzip -l config.zip
…
     2517  2020-08-17 21:58   etc/ntp.conf
      552  2018-04-04 17:56   etc/pam.conf
      115  2023-04-17 11:09   etc/resolv.conf
    10368  2022-03-31 16:53   etc/sensors3.conf
     2683  2018-01-17 17:35   etc/sysctl.conf
     1260  2018-02-25 19:58   etc/ucf.conf
---------                     -------
    36595                     18 files
Extract all files in the archive bin.zip forcing overwrite and create file bin
$ unzip -o bin.zip
… inflating: bin/lesskey             
  inflating: bin/less                
  inflating: bin/lessfile            
  inflating: bin/lesspipe            
  inflating: bin/lessecho   
$ ls
bin  bin.tar  bin.zip  config.zip  usdoi.txt  zoo_ages.txt  zoo.txt
Networking commands
Show the system host name
$ hostname
Theia-bretana1226
View the IP address of the host
$ hostname -i
-bretana1226:/home/project$ hostname -i
172.22.128.73
Test if a host is reachable
Check if www.google.com is reachable
$ ping www.google.com
PING www.google.com (142.251.163.104): 56 data bytes
64 bytes from 142.251.163.104: icmp_seq=0 ttl=104 time=1.606 ms
64 bytes from 142.251.163.104: icmp_seq=1 ttl=104 time=1.667 ms
64 bytes from 142.251.163.104: icmp_seq=2 ttl=104 time=1.732 ms
64 bytes from 142.251.163.104: icmp_seq=3 ttl=104 time=1.914 ms
64 bytes from 142.251.163.104: icmp_seq=4 ttl=104 time=1.735 ms
64 bytes from 142.251.163.104: icmp_seq=5 ttl=104 time=1.959 ms
…updating (keeps sending data packets to www.google.com server and prints response)
Stop pinging
Ctrl C
^C--- www.google.com ping statistics ---
81 packets transmitted, 81 packets received, 0% packet loss
round-trip min/avg/max/stddev = 1.490/1.700/4.266/0.393 ms
Ping 5 times
$ ping -c 5 www.google.com
PING www.google.com (142.251.163.104): 56 data bytes
64 bytes from 142.251.163.104: icmp_seq=0 ttl=104 time=1.627 ms
64 bytes from 142.251.163.104: icmp_seq=1 ttl=104 time=1.581 ms
64 bytes from 142.251.163.104: icmp_seq=2 ttl=104 time=1.621 ms
64 bytes from 142.251.163.104: icmp_seq=3 ttl=104 time=1.690 ms
64 bytes from 142.251.163.104: icmp_seq=4 ttl=104 time=1.569 ms
--- www.google.com ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 1.569/1.618/1.690/0.043 ms
Display network interface configuration
Configure, display network interface parameters for a network, all network interfaces of the system
$ ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1480
        inet 172.22.128.73  netmask 255.255.255.255  broadcast 0.0.0.0
        inet6 fe80::a8ef:31ff:fe03:d8  prefixlen 64  scopeid 0x20<link>
        ether aa:ef:31:03:00:d8  txqueuelen 0  (Ethernet)
        RX packets 7435  bytes 6317517 (6.3 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 6229  bytes 13391196 (13.3 MB)
        TX errors 0  dropped 1 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 12408  bytes 15150627 (15.1 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 12408  bytes 15150627 (15.1 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
Display just the configuration of the eth0 ethernet adapter
$ ifconfig eth0
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1480
        inet 172.22.128.73  netmask 255.255.255.255  broadcast 0.0.0.0 # see inet IP address
        inet6 fe80::a8ef:31ff:fe03:d8  prefixlen 64  scopeid 0x20<link>
        ether aa:ef:31:03:00:d8  txqueuelen 0  (Ethernet)
        RX packets 7535  bytes 6336407 (6.3 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 6300  bytes 13411149 (13.4 MB)
        TX errors 0  dropped 1 overruns 0  carrier 0  collisions 0
Transfer data from or to a server
Access the file usdoi.txt using URL and display contents
$ curl https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/usdoi.txt
…
connection between them and the State of Great Britain, is and ought to be
totally dissolved; and that as Free and Independent States, they have full
Power to levy War, conclude Peace, contract Alliances, establish Commerce, and
to do all other Acts and Things which Independent States may of right do. And
for the support of this Declaration, with a firm reliance on the protection of
divine Providence, we mutually pledge to each other our Lives, our Fortunes and
our sacred Honor.
Access the file with the URL and save it to current working directory
$ curl -O https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/usdoi.txt
age.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/usdoi.txt
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  8121  100  8121    0     0  70008      0 --:--:-- --:--:-- --:--:-- 70008
$ ls
bin  bin.tar  bin.zip  config.zip  usdoi.txt  zoo_ages.txt  zoo.txt
Downloading files from a URL
Remove usdoi.txt form current directory
$ rm usdoi.txt
Re-download usdoi.txt
$ wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/usdoi.txt
…
2023-04-17 11:56:02 (335 MB/s) - ‘usdoi.txt’ saved [8121/8121]
Practice
Go to home directory
$ cd ~
$ pwd
/home/theia
Display your username
$ whoami
Theia
View the kernel version
$ uname -r
5.4.0-139-generic
Display the number of lines in the /etc/password file
$ wc -l /etc/passwd
25 /etc/passwd
Display the lines that contain ‘not installed’ in /var/log/bootstrap.log
$ grep "not installed" /var/log/bootstrap.log
…
  libselinux1 is not installed.
  libpcre3 is not installed.
  libpam0g is not installed.
  libselinux1 is not installed.
  libpam-modules-bin is not installed.
  zlib1g is not installed.
Find out all websites that have the word org in a URL
$ wget https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/top-sites.txt
$ grep org top-sites.txt 
…
w3.org
wikimedia.org
creativecommons.org
fr.wikipedia.org
apache.org
id.wikipedia.org
de.wikipedia.org
Use another method to do the above
$ curl -o top-sites.txt https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0250EN-SkillsNetwork/labs/Bash%20Scripting/top-sites.txt
$ grep org top-sites.txt 
…
w3.org
wikimedia.org
creativecommons.org
fr.wikipedia.org
apache.org
id.wikipedia.org
de.wikipedia.org
Print the first 7 lines of top-sites.txt
$ head -n 7 top-sites.txt
youtube.com
www.google.com
apple.com
microsoft.com
cloudflare.com
play.google.com
support.google.com
Print the last 7 lines of top-sites.txt
$ tail -n 7 top-sites.txt
id.wikipedia.org
rakuten.co.jp
tinyurl.com
amazon.co.jp
de.wikipedia.org
tools.google.com
Zip the file top-sites.txt into a file called top-sites.zip
$ zip top-sites.zip top-sites.txt
  adding: top-sites.txt (deflated 58%)
Print the first 3 characters of each line in top-sites.txt
cut -c -3 top-sites.txt
…
rak
tin
ama
de.
too
buy
Print the details of the eth0 internet adapter
$ ifconfig eth0
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1480
        inet 172.22.128.73  netmask 255.255.255.255  broadcast 0.0.0.0
        inet6 fe80::a8ef:31ff:fe03:d8  prefixlen 64  scopeid 0x20<link>
        ether aa:ef:31:03:00:d8  txqueuelen 0  (Ethernet)
        RX packets 9032  bytes 6684670 (6.6 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 7632  bytes 13703216 (13.7 MB)
        TX errors 0  dropped 1 overruns 0  carrier 0  collisions 0

#####Shell Scripting 4
#! /bin/bash

# In file greet.sh

# This script accepts the user's name and prints 
# a message greeting the user

# Print the prompt message on screen
echo -n "Enter your name :"        

# Wait for user to enter a name, and save the entered name into the 'name'
read name                

# Print the welcome message followed by the name    
echo "Welcome $name"

# The following message should print on a single line. Hence the usage of '-n'
echo -n "Congratulations! You just created and ran your first shell script "
echo "using Bash on IBM Skills Network"

# terminal commands
# check greet.sh permissions
# ls -l greet.sh -> -rw-r--r-- 1 theia users 587 Apr 17 15:24 greet.sh
# it has read permission so...execute it
# bash greet.sh
# Enter your name :Britta
# Welcome Britta
# Congratulations! You just created and ran your first shell script using Bash on IBM Skills Network

# Using 'Shabang' line
# made greet.sh executable, so...
# name of script can be used like a command

# specify the path to the interpreter of the script
# interpreter = bash
# which bash
# which: find the path to interpreter
# /bin/bash
# add the shabang line to the script: see 1st line above #! /bin/bash

# check permissions of the script
# make greet.sh completely executable by name
# chmod +x greet.sh
# ls -l greet.sh -> -rwxr-xr-x
# everyone can execute
# change persmissions again
# chmod u+x greet.sh
# ls -l greet.sh -> -rwxr-xr-x
# now i can execute with: ./greet.sh
## the . refers to current directory
## 'linux execute greet.sh in current directory'
# Enter your name :Britta
# Welcome Britta
# Congratulations! You just created and ran your first shell script using Bash on IBM Skills Network

#! /bin/bash
# above shebang

# This script accepts the user's name and prints 
# a message greeting the user

# Print the prompt message on screen
echo -n "Enter your firstname :"        

# Wait for user to enter a name, and save the entered name into the variable 'name'
read firstname                

# Print the prompt message on screen
echo -n "Enter your lastname :"        

# Wait for user to enter a name, and save the entered name into the variable 'name'
read lastname    

# Print the welcome message followed by the name    
echo "Hello $firstname $lastname."

# check permissions
# ls -l greetnew.sh  -rw-r--r--
# make executable by me
# chmod u+x greetnew.sh
# ls -l greetnew.sh  -rwxr--r--
# execute
# ./greetnew.sh
# Enter your firstname :Britta
# Enter your lastname :Smith
# Hello Britta Smith.

#####Bash Scripting Advanced 5

Objectives
Metacharacters
Quoting
Variables
Command substitution
I/O Redirection
Pipes and Filters
Command line arguments

Metacharacters

# This is a comment line

pwd;date
/home/project
Mon Apr 17 16:33:01 EDT 2023

ls /etc/*.conf
/etc/adduser.conf          /etc/host.conf       /etc/mongodb.conf   /etc/sensors3.conf
/etc/ca-certificates.conf  /etc/ld.so.conf      /etc/nsswitch.conf  /etc/sysctl.conf
/etc/debconf.conf          /etc/libaudit.conf   /etc/ntp.conf       /etc/ucf.conf
/etc/deluser.conf          /etc/logrotate.conf  /etc/pam.conf
/etc/gai.conf              /etc/mke2fs.conf     /etc/resolv.conf

ls /bin/?grep
/bin/egrep  /bin/fgrep  /bin/zgrep

Quoting

echo The symbol for multiplicaton is \*
The symbol for multiplicaton is *

echo 'Following are some special characters in shell - < > ; " ( ) \ [ ]  '
Following are some special characters in shell - < > ; " ( ) \ [ ]

echo "Current user name: $USERNAME"
Current user name: bretana1226

echo 'Current user name: $USERNAME'
Current user name: $USERNAME

Working with Variables

set
...
a lot of variables
...
oc_discourage_it () 
{ 
    cmd=$@;
    if [[ "$cmd" =~ $re1 && "$cmd" =~ $re2 && "${SN_KUBECTL_CONTEXT}" == "$(command kubectl config current-context)" ]]; then
        echo "***WARNING***";
        echo "You're trying to run oc exec with the '-i' or '-t' flags!";
        echo "Running oc interactively (passing '-it' flags) is not allowed in this environment.";
        echo "Please try the command again omitting the '-it' flags.";
        echo "For more information see: https://wiki.skills.network/en/PublicHandbooks/Labs/NoInteractiveKubectl";
        echo "";
        return 1;
    fi;
    command oc "$@"
}

balance=10000
echo $balance
10000

export balance

env
...
TERM=xterm-color
SHELL=/bin/bash
balance=10000
npm_package_theia_frontend_config_preferences_ruby_useLanguageServer=true
THEIA_DEFAULT_PLUGINS=local-dir:/home/theia/plugins
npm_package_devDependencies__theia_cli=1.24.0
...


echo "Current account balance is $balance"
Current account balance is 10000

unset balance

echo $balance
_

Command Substitution

myip=$(hostname -i)
echo $myip
172.22.128.111

echo "Running on host: $(hostname)"
Running on host: theia-bretana1226

ls -l `which cat`
-rwxr-xr-x 1 root root 35064 Jan 18  2018 /bin/cat

I/O Redirection

ifconfig > output.txt

cat output.txt
...
like ifconfig output
...

date > output.txt

cat output.txt
Mon Apr 17 16:49:57 EDT 2023
# overwrote

uname -a >> newoutput.txt
date >> newoutput.txt

cat newoutput.txt
Linux theia-bretana1226 5.4.0-139-generic #156-Ubuntu SMP Fri Jan 20 17:27:18 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
Mon Apr 17 16:50:55 EDT 2023

tr "[a-z]" "[A-Z]" < newoutput.txt
LINUX THEIA-BRETANA1226 5.4.0-139-GENERIC #156-UBUNTU SMP FRI JAN 20 17:27:18 UTC 2023 X86_64 X86_64 X86_64 GNU/LINUX
MON APR 17 16:50:55 EDT 2023

Pipes and Filters

ls | wc -l 
2

df -h|grep overlay
overlay          98G   53G   41G  57% /

ls -lS /bin | head -6
total 5724
-rwxr-xr-x 1 root root 1113504 Apr 18  2022 bash
-rwxr-xr-x 1 root root  423312 Mar 15  2022 tar
-rwxr-xr-x 1 root root  245872 Mar  6  2018 nano
-rwxr-xr-x 1 root root  219456 Sep 18  2019 grep
-rwxr-xr-x 1 root root  170760 Nov 30  2017 less

Command Line Arguments

# wish.sh bash script

#! /bin/bash
echo "Hi $1 $2"
#$1 is the first argument passed to the script
echo "$1 is your firstname"
#$2 is the second argument passed to the script
echo "$2 is your lastname"

# chmod +x wish.sh

# ./wish.sh Ramesh Sannareddy

# Hi Ramesh Sannareddy
# Ramesh is your firstname
# Sannareddy is your lastname

# dirinfo.sh bash script

#! /bin/bash

dircount=$(find $1 -type d|wc -l)

filecount=$(find $1 -type f|wc -l)

echo "There are $dircount directories in the directory $1"

echo "There are $filecount files in the directory $1"

# chmod +x dirinfo.sh

# ./dirinfo.sh /tmp

#There are 9 directories in the directory /tmp
#There are 9 files in the directory /tmp

Practice

Create a variable called ‘color’ and store the string ‘light green’ in it.
color='light green'

Display the list of all the files whose name starts with ‘b’ and ends with ‘.log’ in the directory /var/log.
ls /var/log/b*.log
/var/log/bootstrap.log

Display the count of all files whose name starts with ‘c’ in the /bin directory.
ls /bin/c* | wc -l
5

Display the value of variable ‘color’ in a file color.txt
echo $color > color.txt
cat color.txt
light green

Write a shell script named latest_warnings.sh that prints the latest 5 warnings from the /var/log/bootstrap.log file.

# latest_warnings.sh bash script

#! /bin/bash
grep warning /var/log/bootstrap.log|tail -5

# chmod +x latest_warnings.sh

# ./latest_warnings.sh 

# dpkg: warning: ignoring pre-dependency problem!
# dpkg: warning: ignoring pre-dependency problem!
# dpkg: warning: ignoring pre-dependency problem!
# dpkg: warning: ignoring pre-dependency problem!
# dpkg: warning: ignoring pre-dependency problem!

############ Scheduling with Crontab
Scheduling Jobs using crontab

crontab file syntax

cron: system daemon to execute tasks in background at designated times

crontab file: text file with list of commands to run at specified times, edit via crontab command, 
each line in the file has 5 time and date fields followed by a command, followed by a newline character
\n, fields are seperated by spaces

5 time and date fields cannot contain spaces, allowed values:
minute 0-59
hour 0-23 (0 = midnight)
day 1-31
month 1-12
weekday 0-6 (0 = Sunday)

List cron jobs

$ crontab -l
no crontab for theia # crontab is empty

Add a job in the crontab file

$ crontab -e # opens default text editor, creates new crontab file (if does not exist)
# GNU nano 2.9.3        /tmp/crontab.V94MPB/crontab
# comments
# scroll down to the end of the file: arrow key
# add to the crontab file: job: run echo command when min 0 h 21 = 9 pm every day, output sent to /tmp/echo.txt
0 21 * * * echo "Welcome to cron" >> /tmp/echo.txt
# save changes ctrl x, y, Enter -> command line

Check if job added to crontab
$ crontab -l
...
# m h  dom mon dow   command
0 21 * * * echo "Welcome to cron" >> /tmp/echo.txt

Schedule a Shell Script

diskusage.sh

#! /bin/bash
# print the current date time
date
# print the disk free statistics
df -h

# add permissions
$ chmod u+x diskusage.sh
# run the scrip
$ ./diskusage.sh
Tue Apr 18 09:52:58 EDT 2023
Filesystem      Size  Used Avail Use% Mounted on
overlay          98G   58G   36G  63% /
tmpfs            64M     0   64M   0% /dev
tmpfs            16G     0   16G   0% /sys/fs/cgroup
/dev/vda2        98G   58G   36G  63% /etc/hosts
shm              64M     0   64M   0% /dev/shm
tmpfs            28G   16K   28G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs            16G     0   16G   0% /proc/acpi
tmpfs            16G     0   16G   0% /proc/scsi
tmpfs            16G     0   16G   0% /sys/firmware

Schedule diskusage.sh script run

Edit crontab file
$ crontab -e

Add to end of crontab file
0 0 * * * /home/project/diskusage.sh >>/home/project/diskusage.log

Save and ext
ctrl x, y, Enter

View jobs in crontab file
$ crontab -l
# m h  dom mon dow   command
0 21 * * * echo "Welcome to cron" >> /tmp/echo.txt
0 0 * * * /home/project/diskusage.sh >>/home/project/diskusage.log

Remove the current crontab

Caution: crontab -r removes ALL cron jobs, watch out on a production server

$ crontab -r

$ crontab -l
no crontab for theia

Practice

Create a cron job that runs the task date >> /tmp/everymin.txt every minute

$ crontab -e
* * * * * date >> /tmp/everymin.txt
ctrl x, y, Enter
$ crontab -l
# m h  dom mon dow   command
* * * * * date >> /tmp/everymin.txt
Footer
© 2023 GitHub, Inc.
Footer navigation
Terms
Privacy
Security
Status


